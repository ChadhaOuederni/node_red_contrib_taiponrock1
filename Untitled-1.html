<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
  <style>
    body {
      font-family: "Cairo", "Tahoma", sans-serif;
      background-color: #f3f7ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      direction: rtl;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      padding: 30px;
      width: 420px;
      text-align: center;
    }

    h1 {
      color: #3a6ea5;
      font-size: 24px;
      margin-bottom: 20px;
    }

    textarea {
      width: 100%;
      height: 100px;
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: 10px;
      font-size: 18px;
      resize: none;
      outline: none;
      text-align: right;
    }

    button {
      border: none;
      border-radius: 12px;
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
      color: #fff;
    }

    #btnLire {
      background-color: #5c9ded;
    }
    #btnLire:hover {
      background-color: #4c8bdb;
    }

    #btnParler {
      background-color: #63cc6c;
    }
    #btnParler:hover {
      background-color: #4fbb57;
    }

    #resultat {
      margin-top: 20px;
      font-size: 18px;
      color: #333;
      background-color: #f9f9f9;
      border-radius: 10px;
      padding: 10px;
      text-align: right;
    }

    footer {
      margin-top: 30px;
      font-size: 12px;
      color: #777;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>ğŸ“ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</h1>

    <textarea id="texte" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ³Ù…Ø¹Ù‡Ø§..."></textarea><br>

    <button id="btnLire">ğŸ”Š Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ</button>
    <button id="btnParler">ğŸ¤ ØªØ­Ø¯Ù‘Ø«</button>

    <div id="resultat"></div>
  </div>

  <footer>Â© 2025 - Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</footer>

  <script>
    // ===============================
    // MODULE TTS (ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù…)
    // ===============================
    class ModuleTTS {
      lireTexte(texte) {
        if (!texte) {
          alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ù†ØµÙ‹Ø§ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©!");
          return;
        }
        const synth = window.speechSynthesis;
        const utterance = new SpeechSynthesisUtterance(texte);
        utterance.lang = "ar-SA"; // Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)
        utterance.pitch = 1;
        utterance.rate = 0.9; // Ø³Ø±Ø¹Ø© Ù…Ù†Ø®ÙØ¶Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„
        synth.speak(utterance);
      }
    }

    // ===============================
    // MODULE STT (ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙ„Ø§Ù… Ø¥Ù„Ù‰ Ù†Øµ)
    // ===============================
    class ModuleSTT {
      ecouterAudio(callback) {
        if (!("webkitSpeechRecognition" in window)) {
          alert("Ù…ÙŠØ²Ø© Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.");
          return;
        }
        const recognition = new webkitSpeechRecognition();
        recognition.lang = "ar-SA"; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        recognition.onresult = function (event) {
          const texte = event.results[0][0].transcript;
          callback(texte);
        };

        recognition.onerror = function () {
          alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª.");
        };

        recognition.start();
      }
    }

    // ===============================
    // INTERFACE UTILISATEUR (Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
    // ===============================
    class InterfaceUtilisateur {
      constructor() {
        this.moduleTTS = new ModuleTTS();
        this.moduleSTT = new ModuleSTT();

        this.boutonLire = document.getElementById("btnLire");
        this.boutonParler = document.getElementById("btnParler");
        this.zoneTexte = document.getElementById("texte");
        this.zoneResultat = document.getElementById("resultat");

        this.initialiserEvenements();
      }

      initialiserEvenements() {
        this.boutonLire.addEventListener("click", () => {
          const texte = this.zoneTexte.value.trim();
          this.moduleTTS.lireTexte(texte);
        });

        this.boutonParler.addEventListener("click", () => {
          this.moduleSTT.ecouterAudio((texteReconnu) => {
            this.zoneResultat.innerText = "Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙØ¹ØªØ±Ù Ø¨Ù‡: " + texteReconnu;
          });
        });
      }
    }

    // ===============================
    // LANCEMENT
    // ===============================
    window.onload = () => {
      new
